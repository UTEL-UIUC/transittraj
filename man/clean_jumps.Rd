% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/avl_cleaning.R
\name{clean_jumps}
\alias{clean_jumps}
\title{Applies a Hampel filter to detect large jumps (i.e., outliers) in the trajectories.}
\usage{
clean_jumps(
  distance_df,
  neighborhood_width = 7,
  t_cutoff = 3,
  min_median_deviation = -Inf,
  max_median_deviation = Inf,
  evaluate_tails = FALSE,
  evaluate_implosions = FALSE,
  replace_outliers = FALSE,
  return_removals = FALSE
)
}
\arguments{
\item{distance_df}{Dataframe of linear AVL distances. Must include: "trip_id_performed", "event_timestamp", and numeric "distance".}

\item{neighborhood_width}{Optional. An integer representing the total sliding window width around each observation. Default is 7.}

\item{t_cutoff}{Optional. For filter_method = "MAD" only. Number of MADs away to consider an outlier. Default is 3.}

\item{min_median_deviation}{Optional. For filter_method = "heuristic" only. The minimum distance of each observation from the sliding median. Default is -Inf.}

\item{max_median_deviation}{Optional. For filter_method = "heuristic" only. The maximum distance of each observation from the sliding median. Default is Inf.}

\item{evaluate_implosions}{Optional. A boolean, should points in an implosion sequence be evaluated? "Implosions" occur when more than half of a window is constant; the point will always be identified as an outlier. Default is TRUE.}

\item{replace_outliers}{Optional. For filter_method = "MAD" only. A boolean representing whether violating observations should be replaced with their sliding medians. Default is FALSE (points are removed entirely).}

\item{return_removals}{Optional. A boolean, should the function return a dataframe of points removed and why? Default is FALSE.}

\item{filter_method}{Optional. A string, either "MAD" or "deviation". Default is "MAD".}
}
\value{
The input distance_df, with violating points corrected or removed.
}
\description{
Noise in GPS trajectories can manifest itself as one or more points lying far away from points recorded at a similar time.
This function identifies these "jumps" using a Hampel filter. The Hampel filter constructs a sliding window around each point and calculates the median of this window.
Points are identified as outliers using either their raw deviation (filter_method = "deviation") or median absolute deviation (filter_method = "MAD").
Acceptable cutoffs can be defined for eithe scenario: for the former, as maximum and minimums in the units of "distance"; and for the latter, as a t-value.
Violating observations can either be removed, or replaced with the observed sliding median.
}
