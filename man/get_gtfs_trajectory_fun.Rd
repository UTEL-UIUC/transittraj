% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/trajectory_constructors.R
\name{get_gtfs_trajectory_fun}
\alias{get_gtfs_trajectory_fun}
\title{Fits a continuous function of distance versus time.}
\usage{
get_gtfs_trajectory_fun(
  route_gtfs,
  shape_geometry = NULL,
  project_crs = 4326,
  date_min = NULL,
  date_max = NULL,
  agency_timezone = NULL,
  use_stop_time = "departure",
  add_stop_dwell = 0,
  add_distance_error = 0,
  interp_method = "linear",
  find_inverse_function = TRUE,
  return_group_function = TRUE,
  inv_tol = 0.01
)
}
\arguments{
\item{route_gtfs}{A GTFS for a single route.}

\item{shape_geometry}{Optional. The SF (not shape_id) to use for distances. If NULL, each trip will be referenced to its assigned shape. Default is NULL.}

\item{project_crs}{Optional. A CRS numeric. The projection to use when performing spatial calculations (stops to routes). Consider setting to a Euclidian projection, such as the appropriate UTM zone. Default is 4326 (WGS 84 ellipsoid).}

\item{date_min}{Optional. A date object. The earliest date, in calendar.txt, to create a trip trajectory for. Default is NULL, where the first date in calendar.txt will be used.}

\item{date_max}{Optional. A date object. The latest date, in calendar.txt, to create a trip trajectory for. Default is NULL, where the final date in calendar.txt will be used.}

\item{agency_timezone}{Optional. A timezone string. The appropriate timezone for the stop times. Default is NULL, where the timezone in agency.txt will be used.}

\item{use_stop_time}{Optional. A string. Which stop time column should be used for the timepoint? Must be one of "arrival" (use arrival_time), "departure" (use departure_time), or "both", (timepoints will be created at both the stop arrival and departure). Default is "departure".}

\item{add_stop_dwell}{Optional. A numeric. If using both arrival and departure times, but they are scheduled to be equal (i.e., no dwell), how many seconds of dwell should be added? This will adjust forward the departure_time. Default is 0.}

\item{add_distance_error}{Optional. A numeric. If > 0, will correct for strict monotonicty, if desired. See make_monotonic() and get_trajectory_fun(). Default is 0.}

\item{interp_method}{Optional. A string, Which interpolation method should be used? See get_trajectory_fun(). Default is "linear".}

\item{inv_tol}{Optional. A numeric. What is the tolerance for numeric inverse calculations? See get_trajectory_fun(). Default is 0.01.}

\item{inverse_fun}{Optional. A boolean, should the inverse trajectory function (time ~ distance) be returned? See get_trajectory_fun(). Default is FALSE.}

\item{return_single_fun}{Optional. A boolean, should a single function for all trips be returned (distance ~ f(trip, time))? See get_trajectory_fun(). Deafult is TRUE}
}
\value{
Either a single function, taking in trip, time, and derivative; or a list of single functions by trip, each taking in time and derivative.
}
\description{
Uses scheduled stop times (via \code{stop_times}) to fit an interpolating scheduled trajectory.
Trajectories will be created for each trip on each day, referenced to the time during that day.
Operates via get_trajectory_fun(). See this for more details.
}
